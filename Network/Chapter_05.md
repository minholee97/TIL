### 1. 웹 서버의 설치 장소
#### 1. 사내에 웹 서버를 설치하는 경우
- 인터넷을 빠져나와서 서버에 도착하는 과정은 서버의 설치 장소에 따라 다름
- 가장 간단한 방법은 사내의 LAN에 서버를 설치하고 인터넷에서 직접 액세스하는 경우
- 이렇게하면 가장 가까운 POP에 있는 라우터 -> 액세스 회선 -> 서버측 라우터 순으로 경유하면 서버 머신에 도착함
- 이렇게 하면 사내 LAN에 설치한 서버말고 클라이언트 전부 글로벌 주소를 할당해야 하므로 문제가 있음
- 또한 패킷을 차단하지 않으므로 공격당할 확률이 높음
- 방화벽을 사이에 두고 특정 서버의 특정 애플리케이션에 접근하는 패킷만 통과시키고 나머지는 차단하는 방법도 있는데 이 방법이 가장 일반화됨
#### 2. 데이터센터에 웹 서버를 설치하는 경우
- 회사 안에 서버를 설치하는 것이 아닌 프로바이더가 운영하는 데이터센터 시설에 서버를 설치하거나 프로바이더가 소유하는 서버를 빌려쓰는 형태도 있음
- 데이터센터는 프로바이더의 중심부에 있는 NOC에 직접 접속하거나 프로바이더들이 상호 접속하는 IX에 직결되어 있어서 여기에 서버를 설치하면 고속으로 액세스가 가능함
- 서버에 대한 액세스가 많으면 효과적이라고 볼 수 있음
### 2. 방화벽의 원리와 동작
#### 1. 패킷 필터링형이 주류이다
- 서버의 설치 장소와 상관 없이 보통 방화벽이 서버 앞에 있음
- 방화벽의 기본은 특정 서버와 서버안의 특정 애플리케이션에 액세스하는 패킷만 통과시키고 그 외의 패킷은 차단하는 것
- 방화벽은 여러 방법으로 만들 수 있지만 패킷 필터링형이 가장 많이 사용됨
#### 2. 패킷 필터링의 조건 설정 개념
- 패킷의 헤더들은 통신의 제어 정보를 가지고 있음
- 받는 패킷의 IP 헤더의 수신처 IP 주소와 웹 서버의 IP 주소가 일치하는 패킷은 통과 시킴 (송신처도 등록이 가능하면 등록, 보통은 어디에서 오는지 모르기 때문에 불가)
- 마찬가지로 보내는 패킷의 송신처 IP 주소와 웹 서버의 IP 주소가 일치하는 패킷은 통과 시킴
#### 3. 애플리케이션을 한정할 때 포트번호를 사용
- 이렇게 하면 인터넷과 웹 서버 사이를 흐르는 패킷은 전부 통과해서 위험함
- 웹 서버라면 웹 이외의 애플리케이션의 패킷을 전부 차단하는 것이 좋음
- 포트번호는 TCP, UDP 헤더에 기롣되어 있으므로 이 번호가 웹 서버를 뜻하는 80번인지 확인하는 절차를 조건으로 추가
#### 4. 컨트롤 비트로 접속 방향을 판단함
- 최초에 웹 서버에서 인터넷측으로 패킷이 흐르는 것을 방지하기 위해 TCP 컨트롤 비트가 SYN:1, ACK:0인 패킷을 차단함
- 이렇게 IP 주소와 포트 번호, 컨트롤 비트로 패킷을 필터링할 수 있음
- UDP는 접속 단계의 동작이 없기 때문에 컨트롤 비트로 액세스 방향을 판별할 수 없음
#### 5. 사내 LAN에서 공개 서버용 LAN으로 조건 설정
- 사내 LAN과 서버 LAN이 자유롭게 패킷을 주고 받도록 설정했을때 송신처 IP 주소 조건을 설정하지 않으면 인터넷측의 패킷도 유입되므로 주의가 필요함
#### 6. 밖에서 사내 LAN으로 액세스할 수 없음
- 인터넷의 라우터에는 프라이빗 주소를 등록하지 않으므로 주소 변환이 필요하지만 방화벽의 라우터에는 프라이빗 주소를 등록하면 서버 LAN과 사내 LAN 사이에서 패킷 중계 가능
#### 7. 방화벽을 통과
- 패킷 필터링형 방화벽(필터링 기능을 가진 라우터라고 봐도 무방함)은 송, 수신처 IP 주소, 포트 번호, 컨트롤 비트로 패킷을 통과시킬지 판단함
#### 8. 방화벽으로 막을 수 없는 공격
- 일반적인 패킷 필터링은 시점과 종점으로 전송을 판단하기 때문에 패킷의 내용을 보지 않으므로 위험한 패킷인지 모름 (패킷의 문제라기 보다는 서버의 잠재적인 오류로 인해 서버가 다운되는 오류가 발생할 수 있음)
- 그래서 패킷의 내용을 조사해서 위험한 패킷을 차단하는 장치나 소프트웨어를 별도로 준비하는 것이 좋음(방화벽의 옵션으로 제공되는 것도 있음)
###  3. 서버에 Request를 분배해서 서버의 부하 
